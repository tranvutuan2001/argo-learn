apiVersion: postgresql.cnpg.io/v1
kind: Cluster
metadata:
  name: minikube-db
  namespace: default
spec:
  instances: 2
  
  # Image versioning
  imageName: ghcr.io/cloudnative-pg/postgresql:16

  # Storage configuration
  storage:
    size: 500Mi
    # If storageClass is omitted, it uses the default (standard on Minikube)

  # Resource management
  resources:
    requests:
      cpu: 100m
      memory: 200Mi
    limits:
      cpu: 500m
      memory: 500Mi

  # Database and User setup
  # CNPG handles this via bootstrap or separate Secret/SQL
  bootstrap:
    initdb:
      database: test_db
      owner: test_user